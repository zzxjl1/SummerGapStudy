{"version":3,"file":"js/ocr.20b12114.js","mappings":"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","sources":["webpack://aisee_ui/./src/OCRViewer.vue","webpack://aisee_ui/./src/OCRViewer.vue?6935","webpack://aisee_ui/./src/plugins/utils.js","webpack://aisee_ui/./src/OCRViewer.js","webpack://aisee_ui/./src/plugins/queue.js","webpack://aisee_ui/webpack/bootstrap","webpack://aisee_ui/webpack/runtime/chunk loaded","webpack://aisee_ui/webpack/runtime/compat get default export","webpack://aisee_ui/webpack/runtime/define property getters","webpack://aisee_ui/webpack/runtime/global","webpack://aisee_ui/webpack/runtime/hasOwnProperty shorthand","webpack://aisee_ui/webpack/runtime/make namespace object","webpack://aisee_ui/webpack/runtime/runtimeId","webpack://aisee_ui/webpack/runtime/jsonp chunk loading","webpack://aisee_ui/webpack/startup"],"sourcesContent":["<template>\r\n    <h2>\r\n        <span v-for=\"(item, item_index) in data\" :key=\"item_index\" :id=\"item.id\">\r\n            {{ item.text }}\r\n        </span>\r\n    </h2>\r\n\r\n    <div style=\"height:80px\"></div>\r\n    \r\n    <div class=\"sub-box show\">\r\n        <div @click=\"toggleNewsBroadcast()\">\r\n            <i class=\"iconfont icon-speak fab fab-large\" :class=\"{ on: news_broadcast_interval }\"></i>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <div class=\"control-pannel\" v-if=\"news_broadcast_interval\">\r\n\r\n        <a class=\"btn\" @click=\"backwardNewsBroadcast()\">\r\n            <i class=\"iconfont icon-backward\"></i>\r\n        </a>\r\n        <a class=\"btn\" @click=\"playPauseNewsBroadcast()\">\r\n            <i v-if=\"news_broadcast_paused\" class=\"iconfont icon-play\"></i>\r\n            <i v-else class=\"iconfont icon-pause\"></i>\r\n        </a>\r\n        <a class=\"btn\" @click=\"forwardNewsBroadcast()\">\r\n            <i class=\"iconfont icon-forward\"></i>\r\n        </a>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport queue from '@/plugins/queue';\r\nimport { Howl } from 'howler';\r\nimport \"@/assets/home/iconfont.css\";\r\nexport default ({\r\n    data() {\r\n        return {\r\n            data: null,\r\n            newsBroadcastQueue: queue,\r\n            tts_preload_threshold: 2,\r\n            news_broadcast_interval: null,\r\n            news_broadcast_paused: false,\r\n            isPlaying: false,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.fetch();\r\n        this.toggleNewsBroadcast();\r\n    },\r\n    methods: {\r\n        splitParagraph(text) {\r\n            var result = [];\r\n            var temp = '';\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (text[i] == '。' || text[i] == '，' || text[i] == '；' || text[i] == '？' || text[i] == '！') {\r\n                    result.push({ type: 'sub_sentence', text: temp });\r\n                    result.push({ type: 'punctuation', text: text[i] });\r\n                    temp = '';\r\n                } else {\r\n                    temp += text[i];\r\n                }\r\n            }\r\n            if (temp != '') { result.push({ type: 'sub_sentence', text: temp }); }\r\n\r\n            result.forEach((item, index) => {\r\n                item[\"id\"] = index;\r\n            });\r\n            return result;\r\n        },\r\n        fetch() {\r\n            var t;\r\n            try {\r\n                // eslint-disable-next-line no-undef\r\n                t = JS.fetch();\r\n            } catch (e) {\r\n                t = \"测试，test。123！\";\r\n            }\r\n            this.data = this.splitParagraph(t);\r\n        },\r\n        broadcast() {\r\n            if (this.news_broadcast_paused) return;\r\n\r\n            var item = this.newsBroadcastQueue.front();\r\n\r\n            if (item.sound.state() == \"unloaded\" && !item.sound._preload) {\r\n                item.start_load_timestamp = new Date();\r\n                item.sound.load();\r\n                return;\r\n            }\r\n            if (item.sound.state() == \"loading\") {\r\n                console.log(\"wav file is still loading...\");\r\n                //TIME DIFFERENCE IN SECONDS\r\n                var timeDiff = (new Date() - item.start_load_timestamp) / 1000;\r\n                if (timeDiff > 10) {\r\n                    var t = this.newsBroadcastQueue.dequeue();\r\n                    console.log(\"wav file loading timeout\", t);\r\n                    this.$utils.speek(\"发生了读取错误\", true, true);\r\n                }\r\n                return;\r\n            }\r\n            if (this.isPlaying) {\r\n                console.log(\"wav file is playing...\");\r\n                return;\r\n            }\r\n            var cxt = this;\r\n            item.sound.once(\"play\", function () {\r\n                var id = item.ui_element_id;\r\n                cxt.isPlaying = true;\r\n                if (id != null) {\r\n                    document.getElementById(id).style.background = \"aquamarine\";\r\n                    document.getElementById(id).scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n                }\r\n            });\r\n            item.sound.once(\"end\", function () {\r\n                var id = item.ui_element_id;\r\n                cxt.isPlaying = false;\r\n                if (id != null) {\r\n                    document.getElementById(id).style.background = \"none\";\r\n                }\r\n                var t = cxt.newsBroadcastQueue.dequeue();\r\n                console.log(\"新闻播报完成：\", t);\r\n                if (cxt.newsBroadcastQueue.size() == 0) {\r\n                    cxt.stopBroadcastNews();\r\n                    console.log(\"全部新闻播报完成，清除定时器\");\r\n                }\r\n            });\r\n            item.sound.once(\"stop\", function () {\r\n                var id = item.ui_element_id;\r\n                cxt.isPlaying = false;\r\n                if (id != null) {\r\n                    document.getElementById(id).style.background = \"none\";\r\n                }\r\n            });\r\n            item.sound.once(\"loaderror\", function () {\r\n                var t = cxt.newsBroadcastQueue.dequeue();\r\n                cxt.$utils.speek(\"发生了读取错误\", true, true);\r\n                console.log(\"wav file load error\", t);\r\n            });\r\n            item.sound.once(\"playerror\", function () {\r\n                var t = cxt.newsBroadcastQueue.dequeue();\r\n                cxt.$utils.speek(\"发生了读取错误\", true, true);\r\n                console.log(\"wav file play error\", t);\r\n            });\r\n\r\n            item.sound.play();\r\n\r\n            /*** 缓冲下面的TTS语音 ***/\r\n            this.newsBroadcastQueue.front_n(this.tts_preload_threshold).forEach((e) => {\r\n\r\n                if (e.sound.state() == \"unloaded\") {\r\n                    e.sound.load();\r\n                    e.start_load_timestamp = new Date();\r\n                    console.log(\"preload:\", e);\r\n                }\r\n            });\r\n\r\n        },\r\n        add_to_broadcast_queue(text, id = null) {\r\n            if (text.match(/^\\s+$/)) return; //ignore empty string\r\n            var need_preload = this.newsBroadcastQueue.size() < this.tts_preload_threshold;//前几个需要预加载\r\n            this.newsBroadcastQueue.enqueue({\r\n                text_to_speek: text,\r\n                ui_element_id: id,\r\n                start_load_timestamp: need_preload ? new Date() : null,\r\n                sound: new Howl({\r\n                    src: [encodeURI(`${this.$utils.get_http_base_url()}/tts?text=${text}`)],\r\n                    html5: false,\r\n                    preload: need_preload,\r\n                    autoplay: false,\r\n                    loop: false,\r\n                    volume: 1,\r\n                    format: ['wav'],\r\n                    onload: function () { console.log(\"wav file loaded...\"); },\r\n                })\r\n            });\r\n        },\r\n        broadcastSplited(t) {\r\n            t.forEach((item) => {\r\n                switch (item.type) {\r\n                    case \"sub_sentence\":\r\n                        this.add_to_broadcast_queue(`${item.text}`, item.id);\r\n                        break\r\n                    case \"punctuation\":\r\n                        break\r\n                }\r\n            });\r\n        },\r\n        initBroadcastNews() {\r\n            this.add_to_broadcast_queue(\"下面开始播报\");\r\n            /****  正文Content  ****/\r\n            this.broadcastSplited(this.data);\r\n\r\n            this.add_to_broadcast_queue(\"播报完毕\");\r\n\r\n            console.log(this.newsBroadcastQueue);\r\n        },\r\n        toggleNewsBroadcast() {\r\n            if (this.news_broadcast_interval) {\r\n                this.stopBroadcastNews();\r\n            } else {\r\n                this.startBroadcastNews();\r\n            }\r\n        },\r\n        startBroadcastNews() {\r\n            this.initBroadcastNews();\r\n            this.news_broadcast_interval = setInterval(() => {\r\n                this.broadcast();\r\n            }, 500);\r\n        },\r\n        stopBroadcastNews() {\r\n            clearInterval(this.news_broadcast_interval);\r\n            this.news_broadcast_interval = null;\r\n            var item = this.newsBroadcastQueue.front();\r\n            if (item) item.sound.stop();\r\n            this.newsBroadcastQueue.clear();\r\n        },\r\n        playPauseNewsBroadcast() {\r\n            this.news_broadcast_paused = !this.news_broadcast_paused;\r\n            var item = this.newsBroadcastQueue.front();\r\n            if (this.news_broadcast_paused) {\r\n                item.sound.pause();\r\n                this.$utils.speek(\"暂停\", true, true);\r\n            } else {\r\n                item.sound.play();\r\n            }\r\n        },\r\n        backwardNewsBroadcast() {\r\n            var item = this.newsBroadcastQueue.front();\r\n            item.sound.stop();\r\n            this.newsBroadcastQueue.back();\r\n        },\r\n        forwardNewsBroadcast() {\r\n            var item = this.newsBroadcastQueue.front();\r\n            item.sound.stop();\r\n            this.newsBroadcastQueue.dequeue();\r\n        },\r\n    },\r\n})\r\n</script>\r\n<style scoped>\r\nh2 {\r\n    text-align: justify;\r\n    word-break: break-all;\r\n}\r\n\r\n.sub-box {\r\n    position: fixed;\r\n    z-index: 1;\r\n    right: 10px;\r\n    bottom: 5px;\r\n    transition: .5s;\r\n}\r\n\r\n.fab {\r\n    color: #fff;\r\n    -webkit-border-radius: 100%;\r\n    border-radius: 100%;\r\n    background-color: rgba(0, 0, 0, .5);\r\n    font-size: 30px;\r\n    line-height: 45px;\r\n    position: relative;\r\n    display: inline-block;\r\n    width: 45px;\r\n    height: 45px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n}\r\n\r\n.on {\r\n    background-color: rgba(247, 207, 30, 0.9);\r\n    color: #333333;\r\n}\r\n\r\n.sub-box>div {\r\n    visibility: hidden;\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    transition: .5s;\r\n    margin-bottom: 7px;\r\n    transition: .5s;\r\n}\r\n\r\n.sub-box.show>div {\r\n    visibility: visible;\r\n    pointer-events: auto;\r\n    opacity: 1;\r\n}\r\n\r\n.img-bottom-banner {\r\n    position: absolute;\r\n    display: flex;\r\n    /*margin-top: -55px;*/\r\n    top: 0;\r\n    right: 0;\r\n}\r\n\r\n.img-bottom-banner>div {\r\n    margin-right: 5px;\r\n    margin-left: 5px;\r\n    margin-top: 5px;\r\n}\r\n\r\n.control-pannel {\r\n    display: flex;\r\n    position: fixed;\r\n    bottom: 10px;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    height: 80px;\r\n    right: 0;\r\n    left: 0;\r\n    width: 60vw;\r\n    z-index: 2;\r\n    background: #e0e5ec;\r\n    box-shadow: -7px -7px 20px 0px #fff9, -4px -4px 5px 0px #fff9, 7px 7px 20px 0px #0002, 4px 4px 5px 0px #0001, inset 0px 0px 0px 0px #fff9, inset 0px 0px 0px 0px #0001, inset 0px 0px 0px 0px #fff9, inset 0px 0px 0px 0px #0001;\r\n    transition: box-shadow 0.6s cubic-bezier(.79, .21, .06, .81);\r\n    border-radius: 10px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.btn {\r\n    height: 50px;\r\n    width: 50px;\r\n    border-radius: 3px;\r\n    background: #e0e5ec;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\r\n    -webkit-tap-highlight-color: transparent;\r\n    box-shadow:\r\n        -7px -7px 20px 0px #fff9,\r\n        -4px -4px 5px 0px #fff9,\r\n        7px 7px 20px 0px #0002,\r\n        4px 4px 5px 0px #0001;\r\n    transition: box-shadow 0.6s cubic-bezier(.79, .21, .06, .81);\r\n    font-size: 26px;\r\n    color: #666;\r\n    text-decoration: none;\r\n}\r\n\r\n.btn:active {\r\n    box-shadow: 4px 4px 6px 0 rgba(255, 255, 255, .5),\r\n        -4px -4px 6px 0 rgba(116, 125, 136, .2),\r\n        inset -4px -4px 6px 0 rgba(255, 255, 255, .5),\r\n        inset 4px 4px 6px 0 rgba(116, 125, 136, .3);\r\n}\r\n\r\n.fab-large {\r\n    font-size: 35px;\r\n    line-height: 55px;\r\n    width: 55px;\r\n    height: 55px;\r\n}\r\n</style>\r\n","import { render } from \"./OCRViewer.vue?vue&type=template&id=26e68e1f&scoped=true\"\nimport script from \"./OCRViewer.vue?vue&type=script&lang=js\"\nexport * from \"./OCRViewer.vue?vue&type=script&lang=js\"\n\nimport \"./OCRViewer.vue?vue&type=style&index=0&id=26e68e1f&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\z\\\\Desktop\\\\aisee_ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-26e68e1f\"]])\n\nexport default __exports__","function speek(text, preemptive, flush) {\r\n  try {\r\n    // eslint-disable-next-line no-undef\r\n    JS.speek(text, preemptive, flush);\r\n  } catch (e) {\r\n    console.log(text);\r\n  }\r\n}\r\nfunction toast(t) {\r\n  try {\r\n    // eslint-disable-next-line no-undef\r\n    JS.toast(t);\r\n  } catch (e) {\r\n    console.log(t);\r\n  }\r\n}\r\nfunction get_token() {\r\n  var token;\r\n  try {\r\n    // eslint-disable-next-line no-undef\r\n    token = JS.get_token();\r\n  } catch (e) {\r\n    token = \"KpMP6U1nySvocbAWdtx4qhTZgHmFuVRi\";\r\n  }\r\n  return token;\r\n}\r\nfunction showNewsDetail(id) {\r\n  try {\r\n    // eslint-disable-next-line no-undef\r\n    JS.showNewsDetail(id);\r\n  } catch (e) {\r\n    location.href = `/newsviewer.html?id=${id}`;\r\n    console.log(e);\r\n  }\r\n\r\n  console.log(id);\r\n}\r\nfunction get_http_base_url() {\r\n  var http_base_url;\r\n  try {\r\n    // eslint-disable-next-line no-undef\r\n    http_base_url = JS.get_httpBaseUrl();\r\n  } catch (e) {\r\n    http_base_url = \"http://192.168.31.114:4000\";\r\n  }\r\n  return http_base_url;\r\n}\r\nfunction get_ws_base_url() {\r\n  var ws_base_url;\r\n  try {\r\n    // eslint-disable-next-line no-undef\r\n    ws_base_url = JS.get_wsBaseUrl();\r\n  } catch (e) {\r\n    ws_base_url = \"ws://192.168.31.114:4000\";\r\n  }\r\n  return ws_base_url;\r\n}\r\nexport default {\r\n  speek,\r\n  toast,\r\n  get_token,\r\n  showNewsDetail,\r\n  get_http_base_url,\r\n  get_ws_base_url,\r\n};\r\n","import { createApp } from \"vue\";\r\nimport App from \"./OCRViewer.vue\";\r\nimport utils from \"@/plugins/utils\";\r\n\r\nconst app = createApp(App);\r\napp.config.globalProperties.$utils = utils;\r\napp.mount(\"#app\");\r\n","class Queue {\r\n  constructor() {\r\n    this.count = 0; //记录队列的数量\r\n    this.lowestCount = 0; //记录当前队列顶部的位置\r\n    this.items = []; //用来存储元素。\r\n  }\r\n  enqueue(element) {\r\n    this.items[this.count] = element;\r\n    this.count++;\r\n  }\r\n  dequeue() {\r\n    if (this.isEmpty()) {\r\n      return;\r\n    }\r\n    let resulte = this.items[this.lowestCount];\r\n    //delete this.items[this.lowestCount];\r\n    this.lowestCount++;\r\n    return resulte;\r\n  }\r\n  back() {\r\n    if (this.lowestCount == 0) return false;\r\n    this.lowestCount--;\r\n    return true;\r\n  }\r\n  front() {\r\n    return this.items[this.lowestCount];\r\n  }\r\n  front_n(n) {\r\n    var t = [];\r\n    for (var i = 0; i < n; i++) {\r\n      var item = this.items[this.lowestCount + i];\r\n      if (item == undefined) break;\r\n      t.push(item);\r\n    }\r\n    return t;\r\n  }\r\n  isEmpty() {\r\n    return this.count - this.lowestCount === 0;\r\n  }\r\n  size() {\r\n    return this.count - this.lowestCount;\r\n  }\r\n  clear() {\r\n    this.count = 0;\r\n    this.lowestCount = 0;\r\n    this.items = [];\r\n  }\r\n  toString() {\r\n    if (this.isEmpty()) return \"queue is null\";\r\n    let objString = this.items[this.lowestCount];\r\n    for (let i = this.lowestCount + 1; i < this.count; i++) {\r\n      objString = `${objString},${this.items[i]}`;\r\n    }\r\n    return objString;\r\n  }\r\n}\r\n\r\nmodule.exports = new Queue();\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 483;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t483: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkaisee_ui\"] = self[\"webpackChunkaisee_ui\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(6499); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createElementVNode","style","class","_hoisted_5","_hoisted_9","_createElementBlock","_Fragment","_renderList","$data","item","item_index","key","id","text","_hoisted_1","_hoisted_2","onClick","$options","on","data","newsBroadcastQueue","queue","tts_preload_threshold","news_broadcast_interval","news_broadcast_paused","isPlaying","mounted","this","fetch","toggleNewsBroadcast","methods","splitParagraph","result","temp","i","length","push","type","forEach","index","t","JS","e","broadcast","front","sound","state","_preload","start_load_timestamp","Date","load","console","log","cxt","once","ui_element_id","document","getElementById","background","scrollIntoView","behavior","block","dequeue","size","stopBroadcastNews","$utils","speek","play","front_n","timeDiff","add_to_broadcast_queue","match","need_preload","enqueue","text_to_speek","Howl","src","encodeURI","get_http_base_url","html5","preload","autoplay","loop","volume","format","onload","broadcastSplited","initBroadcastNews","startBroadcastNews","setInterval","clearInterval","stop","clear","playPauseNewsBroadcast","pause","backwardNewsBroadcast","back","forwardNewsBroadcast","__exports__","render","preemptive","flush","toast","get_token","token","showNewsDetail","location","href","http_base_url","get_httpBaseUrl","get_ws_base_url","ws_base_url","get_wsBaseUrl","app","createApp","App","config","globalProperties","utils","mount","Queue","constructor","count","lowestCount","items","element","isEmpty","resulte","n","undefined","toString","objString","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}